<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Daily Budget Calculator (HTML • CSS • JS only)</title>
  <style>
    :root{
      --bg:#0b1020;--card:#121a33;--muted:#a3b1d1;--text:#e8eeff;--accent:#7aa2ff;--accent2:#49dcb1;--danger:#ff6b6b;--warning:#ffd166
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0b1020 0%,#0e1630 100%);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;min-height:100vh}
    .container{max-width:980px;margin:32px auto;padding:0 16px}
    .app{background:var(--card);border:1px solid rgba(255,255,255,.08);box-shadow:0 10px 30px rgba(0,0,0,.35);border-radius:20px;overflow:hidden}
    header{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;padding:18px 20px;border-bottom:1px solid rgba(255,255,255,.08)}
    header h1{font-size:20px;margin:0;letter-spacing:.4px}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .date-picker input{background:#0b1329;border:1px solid rgba(255,255,255,.1);color:var(--text);padding:10px 12px;border-radius:12px}
    .card{padding:18px 20px}
    .stats{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
    .stat{background:#0b1329;border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:14px}
    .stat .label{color:var(--muted);font-size:12px}
    .stat .value{font-size:22px;font-weight:700;margin-top:6px}
    .warning{color:var(--warning)}
    .danger{color:var(--danger)}
    .success{color:var(--accent2)}

    .form-grid{display:grid;grid-template-columns:2fr 1fr auto;gap:10px;align-items:center;margin-top:6px}
    input[type=text], input[type=number], input[type=date]{width:100%;background:#0b1329;border:1px solid rgba(255,255,255,.1);color:var(--text);padding:12px 12px;border-radius:12px}
    input[type=number]{appearance:textfield}
    button{border:0;padding:12px 14px;border-radius:12px;background:var(--accent);color:#0b1020;font-weight:700;cursor:pointer}
    button.secondary{background:#253156;color:var(--text)}
    button.ghost{background:transparent;color:var(--muted);border:1px dashed rgba(255,255,255,.2)}
    button.danger{background:var(--danger);color:white}
    button:disabled{opacity:.6;cursor:not-allowed}

    table{width:100%;border-collapse:separate;border-spacing:0 10px;margin-top:12px}
    thead th{font-size:12px;color:var(--muted);text-align:left;padding:0 10px}
    tbody tr{background:#0b1329;border:1px solid rgba(255,255,255,.08)}
    tbody td{padding:14px 10px}
    tbody tr td:first-child{border-top-left-radius:12px;border-bottom-left-radius:12px}
    tbody tr td:last-child{border-top-right-radius:12px;border-bottom-right-radius:12px}
    .empty{color:var(--muted);text-align:center;padding:24px}

    footer{display:flex;gap:10px;justify-content:flex-end;align-items:center;padding:18px 20px;border-top:1px solid rgba(255,255,255,.08)}
    .note{color:var(--muted);font-size:12px}

    @media(max-width:700px){
      .stats{grid-template-columns:1fr}
      .form-grid{grid-template-columns:1fr}
      header{flex-direction:column;align-items:flex-start}
      footer{flex-direction:column;align-items:stretch}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="app">
      <header>
        <h1>Daily Budget Calculator</h1>
        <div class="row date-picker">
          <label for="date" class="note">Pick date</label>
          <input type="date" id="date" />
        </div>
      </header>

      <div class="card">
        <div class="stats">
          <div class="stat">
            <div class="label">Total Spent</div>
            <div class="value" id="totalDisplay">₹0.00</div>
          </div>
          <div class="stat">
            <div class="label">Daily Target</div>
            <div class="value" style="display:flex;gap:8px;align-items:center">
              <input type="number" step="0.01" min="0" id="targetInput" placeholder="e.g. 1500" />
              <button class="secondary" id="saveTargetBtn">Save</button>
            </div>
          </div>
          <div class="stat">
            <div class="label">Remaining</div>
            <div class="value" id="remainingDisplay">— set a target —</div>
          </div>
        </div>

        <div class="form-grid">
          <input type="text" id="desc" placeholder="Description (e.g. Vegetables, Auto, Milk)" autocomplete="off" />
          <input type="number" id="cost" step="0.01" min="0" placeholder="Cost (₹)" />
          <button type="button" id="addBtn">+ Add</button>
        </div>

        <table>
          <thead>
            <tr>
              <th style="width:60%">Description</th>
              <th style="width:20%">Cost (₹)</th>
              <th style="width:20%">Action</th>
            </tr>
          </thead>
          <tbody id="itemsBody">
            <tr><td colspan="3" class="empty">No items yet. Add your first expense above.</td></tr>
          </tbody>
        </table>
      </div>

      <footer>
        <div class="note">Data is saved in your browser (localStorage) per date. No server needed.</div>
        <div style="flex:1"></div>
        <button class="ghost" id="clearDayBtn">Clear Day</button>
        <button class="secondary" id="exportBtn">Export CSV</button>
      </footer>
    </div>
  </div>

  <script>
    const STORAGE_KEY = 'budget_data_v1';
    function readStore(){
      try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {}; }catch(e){ return {}; }
    }
    function writeStore(data){ localStorage.setItem(STORAGE_KEY, JSON.stringify(data)); }

    const dateInput = document.getElementById('date');
    const descInput = document.getElementById('desc');
    const costInput = document.getElementById('cost');
    const addBtn = document.getElementById('addBtn');
    const itemsBody = document.getElementById('itemsBody');
    const totalDisplay = document.getElementById('totalDisplay');
    const targetInput = document.getElementById('targetInput');
    const saveTargetBtn = document.getElementById('saveTargetBtn');
    const remainingDisplay = document.getElementById('remainingDisplay');
    const clearDayBtn = document.getElementById('clearDayBtn');
    const exportBtn = document.getElementById('exportBtn');

    function todayStr(){ return new Date().toISOString().substring(0,10); }

    function render(){
      const store = readStore();
      const d = dateInput.value || todayStr();
      const dayData = store[d] || {items:[], target:null};

      itemsBody.innerHTML = '';
      if(dayData.items.length===0){
        itemsBody.innerHTML = '<tr><td colspan="3" class="empty">No items yet. Add your first expense above.</td></tr>';
      } else {
        dayData.items.forEach((it,i)=>{
          const tr = document.createElement('tr');
          tr.innerHTML = `<td>${it.desc}</td><td>₹${it.cost.toFixed(2)}</td><td><button class="danger" onclick="deleteItem('${d}',${i})">Delete</button></td>`;
          itemsBody.appendChild(tr);
        });
      }

      const total = dayData.items.reduce((a,b)=>a+b.cost,0);
      totalDisplay.textContent = '₹'+total.toFixed(2);

      if(dayData.target!=null){
        targetInput.value = dayData.target;
        const rem = dayData.target - total;
        remainingDisplay.textContent = '₹'+rem.toFixed(2);
        remainingDisplay.className = 'value ' + (rem<0? 'danger': 'success');
      } else {
        remainingDisplay.textContent = '— set a target —';
        remainingDisplay.className = 'value';
      }
    }

    function addItem(){
      const d = dateInput.value || todayStr();
      const store = readStore();
      if(!store[d]) store[d] = {items:[], target:null};
      const desc = descInput.value.trim();
      const cost = parseFloat(costInput.value);
      if(!desc || isNaN(cost)) return;
      store[d].items.push({desc, cost});
      writeStore(store);
      descInput.value=''; costInput.value='';
      render();
    }

    function deleteItem(d,i){
      const store = readStore();
      if(store[d]){ store[d].items.splice(i,1); writeStore(store);} 
      render();
    }

    function saveTarget(){
      const d = dateInput.value || todayStr();
      const store = readStore();
      if(!store[d]) store[d]={items:[],target:null};
      const val = parseFloat(targetInput.value);
      if(!isNaN(val)) store[d].target = val;
      writeStore(store);
      render();
    }

    function clearDay(){
      const d = dateInput.value || todayStr();
      const store = readStore();
      delete store[d];
      writeStore(store);
      render();
    }

    function exportCSV(){
      const store = readStore();
      let csv = 'Date,Description,Cost\n';
      for(const d in store){
        store[d].items.forEach(it=>{
          csv += `${d},"${it.desc.replace(/\"/g,'"')} ",${it.cost}\n`;
        });
      }
      const blob = new Blob([csv],{type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href=url; a.download='budget.csv';
      document.body.appendChild(a); a.click(); document.body.removeChild(a);
    }

    addBtn.onclick=addItem;
    saveTargetBtn.onclick=saveTarget;
    clearDayBtn.onclick=clearDay;
    exportBtn.onclick=exportCSV;
    dateInput.onchange=render;

    dateInput.value=todayStr();
    render();
  </script>
</body>
</html>
